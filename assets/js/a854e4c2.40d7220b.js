"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[87],{6393:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"api/orders","title":"Orders API","description":"Complete reference for the Orders Management API endpoints.","source":"@site/docs/api/orders.md","sourceDirName":"api","slug":"/api/orders","permalink":"/miicel.io/api/orders","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Orders API"},"sidebar":"docs","previous":{"title":"Product Roadmap","permalink":"/miicel.io/architecture/roadmap"}}');var i=s(4848),t=s(8453);const d={sidebar_position:1,title:"Orders API"},l="Orders Management API",a={},o=[{value:"Overview",id:"overview",level:2},{value:"Endpoints",id:"endpoints",level:2},{value:"GET /api/orders/list",id:"get-apiorderslist",level:3},{value:"Query Parameters",id:"query-parameters",level:4},{value:"Example Request",id:"example-request",level:4},{value:"Example Response",id:"example-response",level:4},{value:"PATCH /api/orders/[id]/status",id:"patch-apiordersidstatus",level:3},{value:"Path Parameters",id:"path-parameters",level:4},{value:"Request Body",id:"request-body",level:4},{value:"Example Request",id:"example-request-1",level:4},{value:"Example Response",id:"example-response-1",level:4},{value:"Authentication",id:"authentication",level:2},{value:"Getting Authentication Token",id:"getting-authentication-token",level:3},{value:"Error Responses",id:"error-responses",level:2},{value:"401 Unauthorized",id:"401-unauthorized",level:3},{value:"403 Forbidden",id:"403-forbidden",level:3},{value:"404 Not Found",id:"404-not-found",level:3},{value:"400 Bad Request",id:"400-bad-request",level:3},{value:"Rate Limiting",id:"rate-limiting",level:2},{value:"Testing",id:"testing",level:2},{value:"Best Practices",id:"best-practices",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"orders-management-api",children:"Orders Management API"})}),"\n",(0,i.jsx)(n.p,{children:"Complete reference for the Orders Management API endpoints."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(n.p,{children:"The Orders API provides endpoints for listing and managing orders in the Vendio platform."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Base URL:"})," ",(0,i.jsx)(n.code,{children:"/api/orders"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Authentication:"})," Required (Bearer token)"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"endpoints",children:"Endpoints"}),"\n",(0,i.jsx)(n.h3,{id:"get-apiorderslist",children:"GET /api/orders/list"}),"\n",(0,i.jsx)(n.p,{children:"List orders with filters and pagination."}),"\n",(0,i.jsx)(n.h4,{id:"query-parameters",children:"Query Parameters"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"tenant_id"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Tenant ID to filter orders"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"status"})}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Filter by status (pending, paid, completed, cancelled)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"page"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Page number (default: 1)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"per_page"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Items per page (default: 50, max: 100)"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"example-request",children:"Example Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X GET "http://localhost:3000/api/orders/list?tenant_id=1&status=pending" \\\n  -H "Authorization: Bearer YOUR_TOKEN" \\\n  -H "Content-Type: application/json"\n'})}),"\n",(0,i.jsx)(n.h4,{id:"example-response",children:"Example Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "orders": [\n    {\n      "id": 1,\n      "tenant_id": 1,\n      "customer": {\n        "id": 1,\n        "name": "Juan P\xe9rez",\n        "email": "juan@example.com",\n        "phone": "+5491123456789"\n      },\n      "items": [\n        {\n          "product_id": 1,\n          "name": "Product Name",\n          "quantity": 2,\n          "unit_price": 1500\n        }\n      ],\n      "total": 3000,\n      "status": "pending",\n      "payment_method": null,\n      "payment_id": null,\n      "notes": null,\n      "created_at": "2025-01-12T12:00:00.000Z",\n      "updated_at": "2025-01-12T12:00:00.000Z"\n    }\n  ],\n  "total_count": 1,\n  "page": 1,\n  "per_page": 50\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"patch-apiordersidstatus",children:"PATCH /api/orders/[id]/status"}),"\n",(0,i.jsx)(n.p,{children:"Update order status."}),"\n",(0,i.jsx)(n.h4,{id:"path-parameters",children:"Path Parameters"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Required"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"id"})}),(0,i.jsx)(n.td,{children:"number"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Order ID"})]})})]}),"\n",(0,i.jsx)(n.h4,{id:"request-body",children:"Request Body"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "status": "paid"\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Valid statuses:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pending"})," - Order created, payment pending"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"paid"})," - Payment completed"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"preparing"})," - Order being prepared"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"completed"})," - Order delivered/completed"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"cancelled"})," - Order cancelled"]}),"\n"]}),"\n",(0,i.jsx)(n.h4,{id:"example-request-1",children:"Example Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'curl -X PATCH "http://localhost:3000/api/orders/1/status" \\\n  -H "Authorization: Bearer YOUR_TOKEN" \\\n  -H "Content-Type: application/json" \\\n  -d \'{"status": "paid"}\'\n'})}),"\n",(0,i.jsx)(n.h4,{id:"example-response-1",children:"Example Response"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": 1,\n  "status": "paid",\n  "updated_at": "2025-01-12T12:30:00.000Z"\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,i.jsx)(n.p,{children:"All endpoints require authentication via Bearer token."}),"\n",(0,i.jsx)(n.h3,{id:"getting-authentication-token",children:"Getting Authentication Token"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Log in to your application"}),"\n",(0,i.jsx)(n.li,{children:"Open browser DevTools \u2192 Application \u2192 Cookies"}),"\n",(0,i.jsxs)(n.li,{children:["Copy the ",(0,i.jsx)(n.code,{children:"sb-access-token"})," value"]}),"\n",(0,i.jsxs)(n.li,{children:["Use as: ",(0,i.jsx)(n.code,{children:"Authorization: Bearer YOUR_TOKEN"})]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"error-responses",children:"Error Responses"}),"\n",(0,i.jsx)(n.h3,{id:"401-unauthorized",children:"401 Unauthorized"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "error": "Unauthorized",\n  "message": "Invalid or missing authentication token"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"403-forbidden",children:"403 Forbidden"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "error": "Forbidden",\n  "message": "User does not have access to this tenant"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"404-not-found",children:"404 Not Found"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "error": "Not Found",\n  "message": "Order not found"\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"400-bad-request",children:"400 Bad Request"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "error": "Bad Request",\n  "message": "Invalid status value",\n  "details": {\n    "status": "Status must be one of: pending, paid, preparing, completed, cancelled"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Rate Limit:"})," 100 requests per minute per tenant"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Headers:"})," Rate limit info included in response headers:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"X-RateLimit-Limit"}),": Maximum requests allowed"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"X-RateLimit-Remaining"}),": Remaining requests"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"X-RateLimit-Reset"}),": Time when limit resets"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,i.jsxs)(n.p,{children:["For comprehensive testing instructions, see the original testing documentation in the ",(0,i.jsx)(n.code,{children:"/docs/testing/"})," folder of the repository."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Always filter by tenant_id:"})," Ensures data isolation"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use pagination:"})," For large result sets, use ",(0,i.jsx)(n.code,{children:"page"})," and ",(0,i.jsx)(n.code,{children:"per_page"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Handle errors gracefully:"})," Check status codes and error messages"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Cache responses:"})," Order lists can be cached for short periods"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Validate status transitions:"})," Only allow valid status changes"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>l});var r=s(6540);const i={},t=r.createContext(i);function d(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);